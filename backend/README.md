# GeoPulse Coin Backend

This is the backend system for GeoPulse Coin, a compliance-focused asset issued on the XRP Ledger.

## Features

- **XRP Ledger Integration**: Issue tokens, freeze trustlines, and monitor transactions.
- **Compliance Engine**: Check transactions against sanctions lists and country risk scores.
- **AI Risk Assessment**: Mock AI models for calculating country risk and analyzing text for geopolitical events.
- **Background Tasks**: Celery tasks for periodic risk score updates.
- **API**: FastAPI-based REST API.

## Project Structure

- `api/`: FastAPI application and routes.
- `xrp_integration/`: XRPL interaction logic.
- `ai/`: AI models (mocked for demo).
- `compliance/`: Compliance rules and checks.
- `database/`: Database models and connection.
- `tasks/`: Celery tasks.
- `config/`: Configuration.

## Prerequisites

- Docker and Docker Compose
- Python 3.10+ (for local development)

## Quick Start (Local)

1. **Install Dependencies**
   ```bash
   pip install -r requirements.txt
   ```

2. **Automated Setup (Recommended)**
   Run the setup script to generate a Testnet Wallet and create a local `.env` file:
   ```bash
   python scripts/setup_dev.py
   ```
   *Note: This will take a few seconds to fund the wallet from the XRP Faucet.*

3. **Run the Demo**
   ```bash
   python demo.py
   ```

4. **Run the API Server**
   ```bash
   uvicorn api.app:app --reload
   ```

## Configuration

The `config/config.py` file reads from environment variables or a `.env` file.

- **`GEO_PULSE_ISSUER_SEED`**: Your XRP Testnet Wallet Seed (auto-generated by setup script).
- **`OPENAI_API_KEY`**: (Optional) Add this to `.env` to enable real AI text analysis with GPT-3.5. If missing, the system uses a mock keyword analyzer.

## Demo Frontend

Access the interactive API docs at `http://localhost:8000/docs`.

### Transactions
- `POST /api/v1/transactions/`: Create a new transaction with compliance checks.

### Compliance
- `POST /api/v1/compliance/check`: Check if an entity/country is sanctioned.
- `POST /api/v1/compliance/analyze-text`: Analyze text for geopolitical risk.

### Users
- `POST /api/v1/users/`: Create a user.

## Demo Frontend

A simple HTML/JS frontend is included to test the API.

1. Open `frontend/index.html` in your browser.
2. Ensure the backend is running (`docker-compose up` or `uvicorn api.app:app --reload`).
3. Use the form to simulate transactions and check compliance.

## Testing

To run tests (if implemented):
```bash
pytest
```
